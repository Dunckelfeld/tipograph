!function(){var e={customRules:[],quotesFormat:"double-open-up double-close-up single-open-up single-close-up"},n=function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e},t=function(e){var n={"double-open-up":"“","single-open-up":"‘","double-close-up":"”","single-close-up":"’","double-open-down":"„","single-open-down":"‚","double-left":"«","single-left":"‹","double-right":"»","single-right":"›","double-left-space":"« ","single-left-space":"‹ ","double-space-right":" »","single-space-right":" ›","double-top-corner":"「","single-top-corner":"『","double-bottom-corner":"」","single-bottom-corner":"』"},t=e.split(" ");t[0]=n[t[0]]||n["double-open-up"],t[1]=n[t[1]]||n["double-close-up"],t[2]=n[t[2]]||n["single-open-up"],t[3]=n[t[3]]||n["single-close-up"];var o=t[0]+"$1"+t[1],p=t[2]+"$1"+t[3];return[o,p]},o=function(){this.escapes=[],this.counter=-1};o.prototype.escape=function(e){var n=/<(pre|code)[^>]*>[\S\s]*(?=<\/\1>)<\/\1>/gi,t=/(<(\S+)[^>]*>)([\S\s]*(?=<\/\2>))(<\/\2>)/g,o=/<[^>\d\s][^>]*>/g,p=this;this.escapes=[],this.counter=-1;for(var r=function(e){return p.counter++,p.escapes.push({pair:!1,content:e}),"#@"+p.counter+"&"};n.test(e);)e=e.replace(n,r);for(var s=function(e,n,t,o,r){return p.counter++,p.escapes.push({pair:!0,opening:n,closing:r}),"#^@"+p.counter+"&"+o+"#$@"+p.counter+"&"};t.test(e);)e=e.replace(t,s);for(;o.test(e);)e=e.replace(o,r);return e},o.prototype.unescape=function(e){for(var n,t,o=0;o<this.escapes.length;o++)t=this.escapes[o],t.pair?(n=new RegExp("#\\^@"+o+"&([\\S\\s]*)#\\$@"+o+"&","g"),e=e.replace(n,t.opening+"$1"+t.closing)):(n=new RegExp("#@"+o+"&","g"),e=e.replace(n,t.content));return e};var p=function(e){this.config={},n(this.config,e)};if(p.prototype.configure=function(e){n(this.config,e)},p.prototype.all=function(e){var n=new o;return e=n.escape(e),e=this.spaces(e,!1),e=this.quotes(e,!1),e=this.mathSigns(e,!1),e=this.hyphens(e,!1),e=this.symbols(e,!1),e=this.symbols(e,!1),n.unescape(e)},p.prototype.quotes=function(e,n){n="undefined"==typeof n?!0:n;var p,r=/'([^']*)'/g,s=/"([^"]*)"/g,c=/(\d)"/g,u=/(\d)'/g,a=/(\w)'(\w)/g,i=/\,\,/g,l=/(\s|^)\,([^'\s]*')/g;n&&(p=new o,e=p.escape(e));var g=t(this.config.quotesFormat);return e=e.replace(i,'"').replace(l,"$1'$2").replace(a,"$1’$2").replace(c,"$1″").replace(u,"$1′").replace(s,g[0]).replace(r,g[1]).replace(/'/g,"’"),n?p.unescape(e):e},p.prototype.spaces=function(e,n){n="undefined"==typeof n?!0:n;var t,p=/\u0020{2,}/g,r=/(\u00B6|\u00A7|\u00A9|\u2122|\u00AE)\u0020/g;return n&&(t=new o,e=t.escape(e)),e=e.replace(p," ").replace(r,"$1 "),n?t.unescape(e):e},p.prototype.hyphens=function(e,n){n="undefined"==typeof n?!0:n;var t,p=/\-\-/g,r=/\-\-\-/g,s=/\s\-\s/g,c=/(\d)\-(\d)/g,u=/([A-Z])\-([A-Z])/g;return n&&(t=new o,e=t.escape(e)),e=e.replace(r,"—").replace(p,"–").replace(c,"$1–$2").replace(s," – ").replace(u,"$1–$2"),n?t.unescape(e):e},p.prototype.mathSigns=function(e,n){n="undefined"==typeof n?!0:n;var t,p=/(\d\s)\-(\s\d)/g,r=/\-(\d)/g,s=/(\d\s)x(\s\d)/g,c=/(\d\s)\/(\s\d)/g,u=/\+\-/g,a=/\!\=|<>/g;return n&&(t=new o,e=t.escape(e)),e=e.replace(p,"$1−$2").replace(r,"−$1").replace(s,"$1×$2").replace(c,"$1÷$2").replace(u,"±").replace(a,"≠"),n?t.unescape(e):e},p.prototype.symbols=function(e,n){n="undefined"==typeof n?!0:n;var t,p=/(\s|^)\((C|c)\)\s?/g,r=/\((TM|tm)\)\s?/g,s=/\((R|r)\)\s?/g,c=/([^\.]|^)\.\.\.([^\.]|$)/g;return n&&(t=new o,e=t.escape(e)),e=e.replace(p,"$1© ").replace(r,"™ ").replace(s,"® ").replace(c,"$1…$2"),n?t.unescape(e):e},p.prototype.addCustomRule=function(e,n){if("string"!=typeof e&&!(e instanceof RegExp))throw"regexp must be a string or a regular expression";if("string"!=typeof n&&"function"!=typeof n)throw"replacement must be a string or a function";this.config.customRules.push({regexp:e,replacement:n})},p.prototype.custom=function(e,n){return n="undefined"==typeof n?!0:n,n&&(html=new o,e=html.escape(e)),this.config.customRules.forEach(function(n){e=e.replace(n.regexp,n.replacement)}),n?html.unescape(e):e},"undefined"!=typeof window){var r=window.Tipograph||{};r.Replace=new p(e),window.Tipograph=r}else module.exports=new p(e)}();